diff a/win32ss/user/user32/controls/edit.c b/win32ss/user/user32/controls/edit.c	(rejected hunks)
@@ -3803,6 +3803,27 @@ static void EDIT_WM_SetFocus(EDITSTATE *es)
 	EDIT_NOTIFY_PARENT(es, EN_SETFOCUS);
 }
 
+static DWORD get_cjk_font_margins(HDC hdc, BOOL unicode)
+{
+	ABC abc[256];
+	SHORT left, right;
+	UINT i;
+
+	left = right = 0;
+	if (unicode) {
+		if (!GetCharABCWidthsW(hdc, 0, 255, abc))
+			return 0;
+	}
+	else {
+		if (!GetCharABCWidthsA(hdc, 0, 255, abc))
+			return 0;
+	}
+	for (i = 0; i < ARRAY_SIZE(abc); i++) {
+		if (-abc[i].abcA > right) right = -abc[i].abcA;
+		if (-abc[i].abcC > left ) left  = -abc[i].abcC;
+	}
+	return MAKELONG(left, right);
+}
 
 /*********************************************************************
  *
