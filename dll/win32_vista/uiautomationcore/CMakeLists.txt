
add_definitions(-D__WINESRC__)

remove_definitions(-D_WIN32_WINNT=0x502)
add_definitions(-D_WIN32_WINNT=0x600)

include_directories(${REACTOS_SOURCE_DIR}/include/reactos/wine)

spec2def(uiautomationcore.dll uiautomationcore.spec ADD_IMPORTLIB)

list(APPEND SOURCE
    uia_client.c
    uia_com_client.c
    uia_event.c
    uia_ids.c
    uia_main.c
    uia_provider.c
    uia_utils.c
    ${CMAKE_CURRENT_BINARY_DIR}/uiautomationcore_stubs.c
    ${CMAKE_CURRENT_BINARY_DIR}/uiautomationcore.def)

add_idl_headers(uiautomationcore_idlheader uia_classes_client.idl uia_classes_core.idl uia_classes.idl)

add_library(uiautomationcore SHARED ${SOURCE})
set_module_type(uiautomationcore win32dll)
add_dependencies(uianimation_idlheader uiautomationcore_idlheader stdole2)
target_link_libraries(uiautomationcore wine uuid)
add_importlibs(uiautomationcore shell32 gdi32 ole32 user32 advapi32 advapi32_vista shlwapi msvcrt ntdll kernel32)
add_cd_file(TARGET uiautomationcore DESTINATION reactos/system32 FOR all)
